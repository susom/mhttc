{% load custom_tags %}
<table class="table table-bordered" id="projects_table" width="100%" cellspacing="0">
    <thead>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Status</th>
        <th>Visibility</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>{% for project in projects %}
        {% if project|can_view:request %}
            <tr>
                <td><a href="{{ project.get_absolute_url }}">{{ project.name }}</a></td>
                <td style="white-space: break-spaces">{{ project.description | truncatechars:100 }}</td>
                <td>{{ project.get_status_display }}</td>
                <td>{{ project.get_visibility_display }}</td>
                <td>
                    {% if project|can_edit:request %}
                        <a href="{{ project.get_absolute_url }}">
                            <button type="button" class="btn btn-primary btn-sm">Edit</button>
                        </a>
                    {% endif %}
                    <a target="_blank" href="{% url 'view_project_form' project.uuid %}">
                        <button type="button" class="btn btn-primary btn-sm"
                                {% if project.form %}{% else %}disabled{% endif %}>View
                        </button>
                    </a>
                    {% if project.status == 0 and project|can_edit:request %}
                        <a href="{% url 'publish_project' project.uuid %}">
                            <button type="button" class="btn btn-primary btn-sm">Publish
                            </button>
                        </a>
                    {% endif %}
                </td>
            </tr>
        {% endif %}
    {% endfor %}
    </tbody>
</table>

